- name: slowlog
  type: group
  description: >
    Contains fields from the TiDB slow logs.
  fields:
    - name: time
      type: date_nanos
      description: >
        The print time of log.
    - name: query_time
      type: double
      description: >
        The execution time of a statement.
    - name: optimize_time
      type: double
      description: >
    - name: wait_ts
      type: double
      description: >
    - name: num_cop_tasks
      type: double
      description: >
    - name: parse_time
      type: double
      description: >
        The parsing time for the statement.
    - name: compile_time
      type: double
      description: >
        The duration of the query optimization.
    - name: query
      type: text
      description: >
        A SQL statement. This field is not printed as a key in the slow log.
        It is the last line of the slow log.
    - name: prev_stmt
      type: text
      description: >
    - name: digest
      type: keyword
      description: >
        The fingerprint of the SQL statement.
    - name: stats
      type: keyword
      description: >
    - name: txn_start_ts
      type: keyword
      description: >
        The start timestamp and the unique ID of a transaction.
        You can use this value to search for the transaction-related logs.
    - name: is_internal
      type: boolean
      description: >
        Whether a SQL statement is TiDB internal.
        True indicates that a SQL statement is executed internally in TiDB
        and false indicates that a SQL statement is executed by the user.
    - name: index_ids
      type: keyword
      description: >
        The IDs of the indexes involved in a statement.
    - name: succ
      type: boolean
      description: >
        Whether a statement is executed successfully.
    - name: backoff_time
      type: double
      description: >
        The waiting time before retry when a statement encounters errors that require a retry.
        The common errors as such include: lock occurs, Region split, and TiKV server is busy.
    - name: lockKeys_time
      type: double
      description: >
    - name: plan
      type: keyword
      description: >
        The execution plan of the statement.
        Use the tidb_decode_plan function in TiDB -- select tidb_decode_plan('xxx...') statement -- to parse the specific execution plan.
    - name: plan_digest
      type: keyword
      description: >
    - name: prepared
      type: boolean
      description: >
        Whether this statement is a Prepare or Execute request or not.
    - name: plan_from_cache
      type: boolean
      description: >
        Whether this statement hits the execution plan cache.
    - name: plan_from_binding
      type: boolean
      description: >
    - name: has_more_results
      type: boolean
      description: >
    - name: rewrite_time
      type: double
      description: >
        The time consumed for rewriting the query of this statement.
    - name: preproc_subqueries
      type: double
      description: >
        The number of subqueries (in the statement) that are executed in advance.
        For example, the where id in (select if from t) subquery might be executed in advance.
    - name: preproc_subqueries_time
      type: double
      description: >
        The time consumed for executing the subquery of this statement in advance.
    - name: exec_retry_count
      type: double
      description:
        The retry times of this statement.
        This field is usually for pessimistic transactions in which the statement is retried when the lock is failed.
    - name: exec_retry_time
      type: double
      description: >
        The execution retry duration of this statement.
        For example, if a statement has been executed three times in total (failed for the first two times),
        Exec_retry_time means the total duration of the first two executions.
        The duration of the last execution is Query_time minus Exec_retry_time.
    - name: prewrite_time
      type: double
      description: >
        The duration of the first phase (prewrite) of the two-phase transaction commit.
    - name: wait_prewrite_binlog_time
      type: double
      description: >
    - name: commit_time
      type: double
      description: >
        The duration of the second phase (commit) of the two-phase transaction commit.
    - name: get_commit_ts_time
      type: double
      description: >
        The time spent on getting commit_ts during the second phase (commit) of the two-phase transaction commit.
    - name: commit_backoff_time
      type: double
      description: >
    - name: backoff_types
      type: keyword
      description: >
    - name: resolve_lock_time
      type: double
      description: >
    - name: local_latch_wait_time
      type: double
      description: >
        The time that TiDB spends on waiting for the lock before the second phase (commit) of the two-phase transaction commit.
    - name: write_keys
      type: double
      description: >
        The count of keys that the transaction writes to the Write CF in TiKV.
    - name: write_size
      type: double
      description: >
        The total size of the keys or values to be written when the transaction commits.
    - name: prewrite_region
      type: double
      description: >
        The number of TiKV Regions involved in the first phase (prewrite) of the two-phase transaction commit.
        Each Region triggers a remote procedure call.
    - name: txn_retry
      type: double
      description: >
    - name: cop_time
      type: double
      description: >
    - name: mem_max
      type: double
      description: >
        The maximum memory space used during the execution period of a SQL statement (the unit is byte).
    - name: disk_max
      type: double
      description: >
        The maximum disk space used during the execution period of a SQL statement (the unit is byte).
    - name: user
      type: keyword
      description: >
        The name of the user who executes this statement.
    - name: user@host
      type: keyword
      description: >
        The name of the user who executes this statement.
    - name: conn_id
      type: keyword
      description: >
        The Connection ID (session ID). For example, you can use the keyword con:3 to search for the log whose session ID is 3.
    - name: host
      type: keyword
      description: >
    - name: db
      type: keyword
      description: >
        The current database.
    - name: index_names
      type: keyword
      description: >
    - name: request_count
      type: double
      description: >
        The number of Coprocessor requests that a statement sends.
    - name: total_keys
      type: double
      description: >
        The number of keys that Coprocessor has scanned.
    - name: kv_total
      type: double
      description: >
    - name: pd_total
      type: double
      description: >
    - name: backoff_total
      type: double
      description: >
    - name: backoff_detail
      type: keyword
      description: >
    - name: write_sql_response_total
      type: double
      description: >
    - name: process_time
      type: double
      description: >
        The total processing time of a SQL statement in TiKV.
        Because data is sent to TiKV concurrently, this value might exceed Query_time.
    - name: wait_time
      type: double
      description: >
        The total waiting time of a statement in TiKV.
        Because the Coprocessor of TiKV runs a limited number of threads,
        requests might queue up when all threads of Coprocessor are working.
        When a request in the queue takes a long time to process,
        the waiting time of the subsequent requests increases.
    - name: process_keys
      type: double
      description: >
        The number of keys that Coprocessor has processed.
        Compared with total_keys, processed_keys does not include the old versions of MVCC.
        A great difference between processed_keys and total_keys indicates that many old versions exist.
    - name: cop_proc_avg
      type: double
      description: >
        The average execution time of cop-tasks.
    - name: cop_proc_p90
      type: double
      description: >
        The P90 execution time of cop-tasks.
    - name: cop_proc_max
      type: double
      description: >
        The maximum execution time of cop-tasks.
    - name: cop_proc_addr
      type: keyword
      description: >
        The address of the cop-task with the longest execution time.
    - name: cop_wait_avg
      type: double
      description: >
        The average waiting time of cop-tasks.
    - name: cop_wait_p90
      type: double
      description: >
        The P90 waiting time of cop-tasks.
    - name: cop_wait_max
      type: double
      description: >
        The maximum waiting time of cop-tasks.
    - name: cop_wait_addr
      type: keyword
      description: >
        The address of the cop-task whose waiting time is the longest.
    - name: rocksdb_delete_skipped_count
      type: double
      description: >
    - name: rocksdb_key_skipped_count
      type: double
      description: >
    - name: rocksdb_block_cache_hit_count
      type: double
      description: >
    - name: rocksdb_block_read_count
      type: double
      description: >
    - name: rocksdb_block_read_byte
      type: double
      description: >
